digraph PurdueModel {
  graph [rankdir=TB, splines=ortho, ranksep=3.0, nodesep=2.0, bgcolor=white, pad=0.5];
  node [shape=record, style="rounded,filled", fontname="Arial", fontsize=11];
  edge [fontname="Arial", fontsize=10, penwidth=2];

  // Level 3: Operations Systems
  subgraph cluster_operations {
    rank=2;
    label="Operations Systems\nMES | Scheduling | OEE | Quality Management";
    style=filled;
    bgcolor="#e6f3ff";
    color="#0066cc";
    penwidth=3;
    fontsize=12;
    operations_srv_0 [label="Ignition Server", shape=rect, style="rounded,filled", fillcolor="#e8f5e8"];
    operations_cli_0 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_1 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_2 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_3 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_4 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_5 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_6 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_7 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_cli_8 [label="HMI Client", shape=rect, style="rounded,filled", fillcolor="#fff8e1"];
    operations_field_0 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_1 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_2 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_3 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_4 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_5 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_6 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_7 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_8 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_9 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_10 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_11 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_12 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    operations_field_13 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
  }

  // Level 2: Supervisory Control
  subgraph cluster_supervisory {
    rank=3;
    label="Supervisory Control\nSCADA | HMI | Alarming | Reporting | Trending";
    style=filled;
    bgcolor="#fff2e6";
    color="#ff8800";
    penwidth=3;
    fontsize=12;
    supervisory_gw_0 [label="Industrial Gateway", shape=house, style=filled, fillcolor="#e3f2fd"];
    supervisory_ctrl_0 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    supervisory_ctrl_1 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    supervisory_ctrl_2 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    supervisory_ctrl_3 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    supervisory_ctrl_4 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
  }

  // Level 1: Process Control
  subgraph cluster_process {
    rank=4;
    label="Process Control\nPLCs | RTUs";
    style=filled;
    bgcolor="#e8f6e8";
    color="#00aa44";
    penwidth=3;
    fontsize=12;
    process_ctrl_0 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    process_ctrl_1 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    process_ctrl_2 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    process_ctrl_3 [label="Allen-Bradley PLC", shape=rect, style="rounded,filled", fillcolor="#fff3e0"];
    process_field_0 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_1 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_2 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_3 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_4 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_5 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_6 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_7 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_8 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_9 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
    process_field_10 [label="Field Device", shape=oval, style=filled, fillcolor="#f9f9f9"];
  }

  // Network Separations
  firewall2 [label="Industrial Firewall", shape=diamond, style=filled, fillcolor="#ffcccc"];

  // Force vertical ordering between levels
  operations_anchor [style=invis];
  supervisory_anchor [style=invis];
  process_anchor [style=invis];
  operations_anchor -> supervisory_anchor [style=invis];
  supervisory_anchor -> process_anchor [style=invis];

  // System Connections
  "141.81.0.10" -> "141.81.0.63" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "192.168.10.121" -> "192.168.10.105" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "141.81.0.10" -> "141.81.0.23" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "192.168.0.30" -> "192.168.0.65" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "141.81.0.10" -> "141.81.0.43" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "141.81.0.83" -> "141.81.0.10" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "192.168.1.24" -> "192.168.1.22" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "192.168.1.69" -> "192.168.1.30" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "10.1.1.164" -> "10.1.1.167" [label="EtherNet/IP", color="#00aa44", fontsize=9];
  "192.168.10.105" -> "192.168.10.120" [label="EtherNet/IP", color="#00aa44", fontsize=9];
}
